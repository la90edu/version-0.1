import crop_for_llm
import llm_claude
import llm_gpt
import ids

reflection_prompt="""
×”××©×ª××© ×¢× ×” ×¢×œ ×—×™×“×”. ×œ××—×¨ ×©×¢× ×” × ×××¨ ×œ×• ×”×× ×”×ª×©×•×‘×” ×”×™× × ×›×•× ×” ××• ×œ×, ×•×”×•×¦×’×• ×œ×• ×©××œ×•×ª ×‘× ×•×’×¢ ×œ×—×•×•×™×” ×©×œ×• ×‘×¤×ª×¨×•×Ÿ ×”×©××œ×”. 
×× ×™ ×¨×•×¦×” ×©×”×ª×œ××™×“ ××©×¨ ××™×œ× ××ª ×”×©××œ×•×Ÿ ×™×œ××“ ××©×”×• ×—×“×© ×¢×œ ×¢×¦××• ×“×¨×š ×”× ×™×ª×•×— ×©×œ×š ××ª ×ª×©×•×‘×•×ª×™×•, ×× × ×¢×©×” ×–××ª. 
××“×•×‘×¨ ×‘×ª×œ××™×“ ×‘×Ÿ 15, ×× × ×”×ª×× ××ª ×”×©×¤×” ×•××ª ×”×¨××” ×‘×” ×”×“×‘×¨×™× ×›×ª×•×‘×™×, ×¤×©×˜ ××ª ×”×“×‘×¨×™×.
×× × × ×¡×” ×œ××ª×¨ ×”×× ×”× ×‘×“×§ ×××•×¤×™×™×Ÿ ×™×•×ª×¨ ×‘××•×˜×™×‘×¦×™×™×ª ×œ××™×“×” ××• ××•×˜×‘×¦×™×™×ª ×”×™×©×’, ×•×©×œ×‘ ×–××ª ×‘×ª×©×•×‘×ª×š ×‘××•×¤×Ÿ ×‘×”×™×¨ ×•× ×”×™×¨
×”×ª×œ××™×“ ×œ× ××›×™×¨ ××ª ×”××•×©×’ ××•×˜×™×‘×¦×™×™×ª ×œ××™×“×” ×•××•×˜×™×‘×¦×™×™×ª ×”×™×©×’
×¡×™×™× ××ª ×”×”×•×“×¢×” ×‘×‘×¨×›×ª ×”×¦×œ×—×”.
"""

hamarat_hegedim_prompt="""
×× × ×”××¨ ××ª ×”×”×™×’×“×™× ×œ×××™×¨×•×ª ×©×œ ×”× ×‘×“×§ ×¢×œ ×¢×¦××•. 
×œ××©×œ: "×™×© ×œ×™ ×¨×¦×•×Ÿ ×œ×§×—×ª ×¢×œ ×¢×¦××™ ××©×™××•×ª ×©×“×•×¨×©×•×ª ××× ×™ ×œ×”×™×•×ª ××—×¨××™ ×¢×œ ××—×¨×™×", "×œ× ×“×•××” ×‘×›×œ×œ" = "××™×Ÿ ×œ×™ ×¨×¦×•×Ÿ ×œ×§×—×ª ×¢×œ ×¢×¦××™ ××©×™××•×ª ×©×“×•×¨×©×•×ª ××× ×™ ×œ×”×™×•×ª ××—×¨××™ ×¢×œ ××—×¨×™×"

"×™×© ×œ×™ × ×˜×™×” ×œ×”×¨×’×™×© ×ª×—×•×©×•×ª ×©×œ × ×•×¡×˜×œ×’×™×•×ª ×¢×œ ×“×‘×¨×™× ×©×§×¨×• ×‘×¢×‘×¨ ×©×œ×™", "×“×•××”" = "×™×© ×œ×™ × ×˜×™×” ×œ×”×¨×’×™×© ×ª×—×•×©×•×ª ×©×œ × ×•×¡×˜×œ×’×™×•×ª ×¢×œ ×“×‘×¨×™× ×©×§×¨×• ×‘×¢×‘×¨ ×©×œ×™"

"×™×© ×‘×™ ×××•× ×” ×©××™ ××¤×©×¨ ×‘×××ª ×œ×ª×›× ×Ÿ ××ª ×”×¢×ª×™×“ ×›×™ ×“×‘×¨×™× ××©×ª× ×™× ×›×œ ×”×–××Ÿ", "×§×¦×ª ×“×•××”" = "×× ×™ ×§×¦×ª ××××™×Ÿ ×©××™ ××¤×©×¨ ×‘×××ª ×œ×ª×›× ×Ÿ ××ª ×”×¢×ª×™×“ ×›×™ ×“×‘×¨×™× ××©×ª× ×™× ×›×œ ×”×–××Ÿ."
"""
hegedim_prompt="""
×œ×¤× ×™×š ×”×™×’×“×™× ×©×œ × ×¢×¨ ××• × ×¢×¨×” ×‘× ×™ 15. ×”×¤×§ ××ª×•×›×• ×¤×¨×•×¤×™×œ ×¤×¡×™×›×•×œ×•×’×™ ××•×ª×• ×ª×›×ª×•×‘ ×‘×©×¤×” ×©××•×ª×××ª ×œ×‘× ×™ × ×•×¢×¨.
×”×ª×™×™×—×¡ ×œ×ª××•×ª ×©×œ ×™×—×¡ ×œ×¢×‘×¨, ×”×•×•×” ×•×¢×ª×™×“, ×”×ª××•×“×“×•×ª ×¢× ×œ×—×¥ ×•×§×©×™×™×, ×•×¢×¨×š ×¢×¦××™.
×¢×˜×•×£ ××ª ××–×•×¨×™ ×”×§×•×©×™ ×‘×—×•×–×§×•×ª. ×‘×¡×•×£ ×ª×Ÿ ×œ×• ×—×œ×§ ×©×œ "×¢×ª×™×“×•×ª". 
×›×ª×•×‘ ×–××ª ×™×©×™×¨×•×ª ×œ× ×¢×¨ ××• ×”× ×¢×¨×”. ×”×× ×¢ ××©×™××•×© ×‘××•×©×’ "×¤×¨×•×¤×™×œ ×¤×¡×™×›×•×œ×•×’×™"
"""

def give_feedback_reflection(conversation_history):
    #crop
    #start_pharse=ids.return_text_by_the_id("Q1")
    #print(start_pharse)
    #croped_string=crop_for_llm.crop_and_change_to_string(conversation_history,start_pharse)
    #print(croped_string)
    croped=crop_for_llm.crop_reflection(conversation_history)
    string_format=crop_for_llm.data_to_string(croped)
    #send_to_llm
    text=llm_claude.return_llm_answer(string_format,reflection_prompt)
    return text
    
    
def give_feedback_hegedim(conversation_history):
    #crop
    #start_pharse="×ª×©×•×‘×” ×©×’×•×™×”"
    #croped_string=crop_for_llm.crop_and_change_to_string(conversation_history,start_pharse)
    #if croped_string==[]:
    #    start_pharse="×ª×©×•×‘×” × ×›×•× ×”"
    #    croped_string=crop_for_llm.crop_and_change_to_string(conversation_history,start_pharse)
    croped=crop_for_llm.crop_hegedim(conversation_history)
    string_format=crop_for_llm.data_to_string(croped)
    #send_to_llm for hamarat_hideim  #gpt4o
    # croped_string=conversation_history ## temporary
    tenslated_hegedim=llm_gpt.return_llm_answer(hamarat_hegedim_prompt,string_format)
    #send_to_llm for hegedim
    text=llm_claude.return_llm_answer(tenslated_hegedim,hegedim_prompt)
    return text
    
    
    
# data = """
# {'role': 'assistant', 'content': '×™×© ×œ×™ ×¨×¦×•×Ÿ ×œ×§×—×ª ×¢×œ ×¢×¦××™ ××©×™××•×ª ×©×“×•×¨×©×•×ª ××× ×™ ×œ×”×™×•×ª ××—×¨××™/×ª ×¢×œ ××—×¨×™×. ğŸ’ª'}
# {'role': 'user', 'content': 'ğŸ˜ ×§×¦×ª ×“×•××”'}
# {'role': 'assistant', 'content': '×§×•×¨×” ×œ×™ ×”×¨×‘×” ×©×× ×™ ×—×•×©×‘/×ª ×¢×œ ×“×‘×¨×™× ×¨×¢×™× ×©×§×¨×• ×œ×™. ğŸ˜'}
# {'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'}
# {'role': 'assistant', 'content': '×™×© ×‘×™ ×××•× ×” ×©××™ ××¤×©×¨ ×‘×××ª ×œ×ª×›× ×Ÿ ××ª ×”×¢×ª×™×“ ×›×™ ×“×‘×¨×™× ××©×ª× ×™× ×›×œ ×”×–××Ÿ. ğŸ¤·â€â™‚ï¸'}
# {'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'}
# {'role': 'assistant', 'content': '×’× ×ª×—×ª ×œ×—×¥, ×™×© ×œ×™ ×™×›×•×œ×ª ×œ×”×©××¨ ×‘×¤×•×§×•×¡ ×•×œ×—×©×•×‘ ×‘××•×¤×Ÿ ×‘×”×™×¨. ğŸ”'}
# {'role': 'user', 'content': 'ğŸ˜ƒ ×“×•××” ×œ×—×œ×•×˜×™×Ÿ'}
# {'role': 'assistant', 'content': '××™×™××© ××•×ª×™ ×œ×¢×©×•×ª ××©×”×• ×©×× ×™ ××¨××” ××ª ×”×ª×•×¦××•×ª ×©×œ×• ×¨×§ ×‘×¢×•×“ ×”×¨×‘×” ×–××Ÿ. ğŸ˜“'}
# {'role': 'user', 'content': 'ğŸ˜ƒ ×“×•××” ×œ×—×œ×•×˜×™×Ÿ'}
# {'role': 'assistant', 'content': '×™×© ×œ×™ × ×˜×™×™×” ×œ×”×¨×’×™×© ×ª×—×•×©×•×ª ×©×œ × ×•×¡×˜×œ×’×™×•×ª ×¢×œ ×“×‘×¨×™× ×©×§×¨×• ×‘×¢×‘×¨ ×©×œ×™. ğŸŒŸ'}
# {'role': 'user', 'content': 'ğŸ˜ ×§×¦×ª ×“×•××”'}
# {'role': 'assistant', 'content': '×ª××™×“ ××¡×™×™× ××ª ×›×œ ×”××˜×œ×•×ª ×œ××—×¨ ×œ×¤× ×™ ×©××¦× ×œ×‘×œ×•×ª ××• ×œ× ×•×— ×‘×¢×¨×‘ ×©×œ ××•×ª×• ×”×™×•×. â°'}
# {'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'}
# {'role': 'assistant', 'content': '×ª××™×“ ××¢××•×“ ×‘×”×‘×˜×—×•×ª ×©×œ×™ ×œ×—×‘×¨×™× ××• ×œ×›×œ ××—×“ ××—×¨ ×›××• ×”××•×¨×” ××• ×”×”×•×¨×™× ×©×œ×™. âœ”ï¸'}
# {'role': 'user', 'content': 'ğŸ™ ×œ× ×›×œ ×›×š ×“×•××”'}
# {'role': 'assistant', 'content': '×™×© ×œ×™ ×™×›×•×œ×ª ×œ×”×©×œ×™× ×¤×¨×•×™×§×˜×™× ×‘×–××Ÿ ×¢×œ ×™×“×™ ×›×š ×©×× ×™ ××©×§×™×¢/×” ×‘×”× ×œ××•×¨×š ×–××Ÿ ×•×œ× ×¨×§ ×‘×¨×’×¢ ×”××—×¨×•×Ÿ. ğŸ•°ï¸'}
# {'role': 'user', 'content': 'ğŸ˜¡ ×œ× ×“×•××” ×‘×›×œ×œ'},
# {'role': 'assistant', 'content': 'ğŸ”„ ××” ×”××™×“×” ×©×”× ×××¨ ×œ××˜×” ×–×”×” ×œ×ª×¤×™×¡×” ×©×œ×š ××ª ×¢×¦××š?'}
# {'role': 'assistant', 'content': '×™×© ×œ×™ ×¦×•×¨×š ×©××™×©×”×• ××—×¨ ×™×¤×¨×’×Ÿ ×•×™×—××™× ×œ×™ ×¢×œ ×”×¢×‘×•×“×” ×©×œ×™ ×›×“×™ ×©××”×™×” ××¨×•×¦×” ×××” ×©×¢×©×™×ª×™. ğŸ™Œ'}
# {'role': 'user', 'content': '×§×¦×ª ×›××•× ×™ ğŸ˜'}
# """
    
    
data = [
{'role': 'assistant', 'content': 'ğŸ‘‹ ××ª× ×¢×•××“×™× ×œ××œ× ×©××œ×•×Ÿ ××˜×¢× ×ª×›× ×™×ª ×”×”×™×™×˜×§...'},
{'role': 'assistant', 'content': '××” ×”××’×“×¨ ×©×œ×š?'},
{'role': 'user', 'content': '× ×§×‘×”'},
{'role': 'assistant', 'content': '×‘××™×–×• ×›×™×ª×” ××ª/×”?'},
{'role': 'user', 'content': '×›×™×ª×” ×™'},
{'role': 'assistant', 'content': '×ª×•×“×” ×¨×‘×”'},
{'role': 'assistant', 'content': '×‘×—×¨ ××ª ×©× ×‘×™×ª ×”×¡×¤×¨ ×©×œ×š:'},
{'role': 'user', 'content': '×ª×™×›×•×Ÿ ×—×“×© ×“×¨×›× - ×‘×ª ×™×'},
{'role': 'assistant', 'content': '×ª×•×“×”'},
{'role': 'user', 'content': '×¢×œ×—×œ'},
{'role': 'assistant', 'content': '×ª×•×“×”'},
{'role': 'assistant', 'content': '×”×¨×—×‘×•×ª (××œ×‘×“ ××ª××˜×™×§×” ×•×× ×’×œ×™×ª) - ×× × ×‘×—×¨/×™ ××ª ×”×§×¨×•×‘ ×‘×™×•×ª×¨'},
{'role': 'user', 'content': '××’××•×ª ××•×× ×•×ª×™×•×ª'},
{'role': 'assistant', 'content': '×”×× ××ª/×” ××›×™×¨/×” ××™×©×”×• ×©×¢×•×‘×“ ×‘×”×™×™-×˜×§?'},
{'role': 'user', 'content': '××™×©×”×• ×©×œ× ×§×©×•×¨ ×œ××©×¤×—×”'},
{'role': 'assistant', 'content': '×”×× ××•×‘×—× ×ª ×‘××•×¤×Ÿ ×¨×©××™ ×¢× ××—×“ ××• ×™×•×ª×¨ ××”×‘××™×?'},
{'role': 'user', 'content': '×œ× ××•×‘×—× ×ª×™'},
{'role': 'assistant', 'content': '×‘×—×œ×§ ×”×§×¨×•×‘ ×™×•×¦×’×• ×”×™×’×“×™×...'},
{'role': 'assistant', 'content': 'ğŸ¤” ×‘××™×–×• ××™×“×” ×”×”×ª× ×”×’×•×ª ×œ××˜×” ×“×•××” ×œ×“×¨×š ×©×‘×” ××ª/×” ××ª× ×”×’?'},
{'role': 'assistant', 'content': '×™×© ×œ×™ ×¨×¦×•×Ÿ ×œ×§×—×ª ×¢×œ ×¢×¦××™ ××©×™××•×ª ×©×“×•×¨×©×•×ª ××× ×™ ×œ×”×™×•×ª ××—×¨××™/×ª ×¢×œ ××—×¨×™×. ğŸ’ª'},
{'role': 'user', 'content': 'ğŸ˜ ×§×¦×ª ×“×•××”'},
{'role': 'assistant', 'content': '×§×•×¨×” ×œ×™ ×”×¨×‘×” ×©×× ×™ ×—×•×©×‘/×ª ×¢×œ ×“×‘×¨×™× ×¨×¢×™× ×©×§×¨×• ×œ×™. ğŸ˜'},
{'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'},
{'role': 'assistant', 'content': '×™×© ×‘×™ ×××•× ×” ×©××™ ××¤×©×¨ ×‘×××ª ×œ×ª×›× ×Ÿ ××ª ×”×¢×ª×™×“ ×›×™ ×“×‘×¨×™× ××©×ª× ×™× ×›×œ ×”×–××Ÿ. ğŸ¤·â€â™‚ï¸'},
{'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'},
{'role': 'assistant', 'content': '×’× ×ª×—×ª ×œ×—×¥, ×™×© ×œ×™ ×™×›×•×œ×ª ×œ×”×©××¨ ×‘×¤×•×§×•×¡ ×•×œ×—×©×•×‘ ×‘××•×¤×Ÿ ×‘×”×™×¨. ğŸ”'},
{'role': 'user', 'content': 'ğŸ˜ƒ ×“×•××” ×œ×—×œ×•×˜×™×Ÿ'},
{'role': 'assistant', 'content': '××™×™××© ××•×ª×™ ×œ×¢×©×•×ª ××©×”×• ×©×× ×™ ××¨××” ××ª ×”×ª×•×¦××•×ª ×©×œ×• ×¨×§ ×‘×¢×•×“ ×”×¨×‘×” ×–××Ÿ. ğŸ˜“'},
{'role': 'user', 'content': 'ğŸ˜ƒ ×“×•××” ×œ×—×œ×•×˜×™×Ÿ'},
{'role': 'assistant', 'content': '×™×© ×œ×™ × ×˜×™×™×” ×œ×”×¨×’×™×© ×ª×—×•×©×•×ª ×©×œ × ×•×¡×˜×œ×’×™×•×ª ×¢×œ ×“×‘×¨×™× ×©×§×¨×• ×‘×¢×‘×¨ ×©×œ×™. ğŸŒŸ'},
{'role': 'user', 'content': 'ğŸ˜ ×§×¦×ª ×“×•××”'},
{'role': 'assistant', 'content': '×ª××™×“ ××¡×™×™× ××ª ×›×œ ×”××˜×œ×•×ª ×œ××—×¨ ×œ×¤× ×™ ×©××¦× ×œ×‘×œ×•×ª ××• ×œ× ×•×— ×‘×¢×¨×‘ ×©×œ ××•×ª×• ×”×™×•×. â°'},
{'role': 'user', 'content': 'ğŸ™‚ ×“×•××”'},
{'role': 'assistant', 'content': '×ª××™×“ ××¢××•×“ ×‘×”×‘×˜×—×•×ª ×©×œ×™ ×œ×—×‘×¨×™× ××• ×œ×›×œ ××—×“ ××—×¨ ×›××• ×”××•×¨×” ××• ×”×”×•×¨×™× ×©×œ×™. âœ”ï¸'},
{'role': 'user', 'content': 'ğŸ™ ×œ× ×›×œ ×›×š ×“×•××”'},
{'role': 'assistant', 'content': '×™×© ×œ×™ ×™×›×•×œ×ª ×œ×”×©×œ×™× ×¤×¨×•×™×§×˜×™× ×‘×–××Ÿ ×¢×œ ×™×“×™ ×›×š ×©×× ×™ ××©×§×™×¢/×” ×‘×”× ×œ××•×¨×š ×–××Ÿ ×•×œ× ×¨×§ ×‘×¨×’×¢ ×”××—×¨×•×Ÿ. ğŸ•°ï¸'},
{'role': 'user', 'content': 'ğŸ˜¡ ×œ× ×“×•××” ×‘×›×œ×œ'},
{'role': 'assistant', 'content': 'ğŸ”„ ××” ×”××™×“×” ×©×”× ×××¨ ×œ××˜×” ×–×”×” ×œ×ª×¤×™×¡×” ×©×œ×š ××ª ×¢×¦××š?'},
{'role': 'assistant', 'content': '×™×© ×œ×™ ×¦×•×¨×š ×©××™×©×”×• ××—×¨ ×™×¤×¨×’×Ÿ ×•×™×—××™× ×œ×™ ×¢×œ ×”×¢×‘×•×“×” ×©×œ×™ ×›×“×™ ×©××”×™×” ××¨×•×¦×” ×××” ×©×¢×©×™×ª×™. ğŸ™Œ'},
{'role': 'user', 'content': '×§×¦×ª ×›××•× ×™ ğŸ˜'}
]


# answer=give_feedback_hegedim(data)
# print(answer)
# answer=give_feedback_reflection(data)
# print(answer)
